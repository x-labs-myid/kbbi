<Page actionBarHidden="false"
	loaded="onLoaded" 
	xmlns="http://schemas.nativescript.org/tns.xsd"
	xmlns:admob="@nativescript/firebase-admob">
	
	<ActionBar flat="true">
		<GridLayout 
			columns="*, 5, auto, 15">
			<Label 
				text="Rincian Kata" 
				class="popin-br text-left text-black"
				textWrap="true"
				col="0" />
			<Button
				text="&#xf002;"
				textWrap="true"
				tap="{{ close }}"
				class="text-center text-black fas text-[18px] border-none rounded-full bg-none active:bg-gray-100 active:scale-95 transition duration-150"
				width="50"
				col="2"
				/>
		</GridLayout>
	</ActionBar>
	
	<GridLayout rows="10, auto, 10, auto, 15, *, 0, auto">
		<!-- <GridLayout rows="auto, auto" columns="*, auto, *" row="1"> -->
			<Label
				class="text-center text-black text-[20px] px-5 py-2"
				textWrap="true" row="1">
				<FormattedString>
					<Span text="&#xf10d;" class="fas" />
					<Span text="&nbsp;&nbsp;" />
					<Span text="{{ keyword }}" class="popin-r" />
					<Span text="&nbsp;&nbsp;" />
					<Span text="&#xf10e;" class="fas" />
				</FormattedString>
			</Label>

			<GridLayout horizontalAlignment="center" columns="auto, auto, 5, auto, 5, auto, auto" row="3" class="border-4 rounded-full my-2 mx-3" borderColor="{{ switchChecked ? '#388E3C' : '#000000' }}">
				<Label tap="{{ switchToggle }}" checked="false"
					class="text-center px-5 py-2"
					color="{{ switchChecked ? '#BDBDBD' : '#000000' }}"
					textWrap="true" col="1">
					<FormattedString>
						<Span text="&#xe560;" class="fas  text-[16px]" />
						<Span text="&nbsp;" />
						<Span text="KBBI Luring" class="popin-b  text-[14px]" />
					</FormattedString>
				</Label>
				<Switch checkedChange="{{ switchChanges }}" checked="{{ switchChecked }}"
					color="{{ switchChecked ? '#388E3C' : '#000000' }}"
					backgroundColor="#A5D6A7"
					offBackgroundColor="#616161"
					col="3"
				/>
				<Label tap="{{ switchToggle }}" checked="true"
					class="text-center px-5 py-2"
					color="{{ switchChecked ? '#388E3C' : '#BDBDBD' }}"
					textWrap="true" col="5">
					<FormattedString>
						<Span text="KBBI Daring" class="popin-b  text-[14px]" />
						<Span text="&nbsp;" />
					<Span text="&#xe55c;" class="fas  text-[16px]" />
					</FormattedString>
				</Label>
			</GridLayout>
		<!-- </GridLayout> -->
		<GridLayout rows="auto, auto, *" row="5" class="bg-gray-200 pt-5" borderRadius="45 45 0 0">
			<!-- KBBI LURING -->
			<Label row="0"
				visibility="{{ !switchChecked ? 'visible' : 'collapsed' }}"
				class="text-center px-5 pt-2"
				color="{{ switchChecked ? '#BDBDBD' : '#000000' }}"
				textWrap="true">
				<FormattedString>
					<Span text="&#xe560;" class="fas  text-[22px]" />
					<Span text="&nbsp;" />
					<Span text="KBBI Luring" class="popin-r  text-[18px]" />
				</FormattedString>
			</Label>
			<Label row="1"
				visibility="{{ !switchChecked ? 'visible' : 'collapsed' }}"
				class="text-center px-5 pb-2"
				color="{{ switchChecked ? '#BDBDBD' : '#000000' }}"
				textWrap="true">
				<FormattedString>
					<Span text="Untuk versi luring bersumber dari basis data lokal&nbsp;" class="popin-r" />
					<Span text="KBBI III" class="popin-b" />
				</FormattedString>
			</Label>
			<!-- KBBI DARING -->
			<Label row="0"
			visibility="{{ switchChecked ? 'visible' : 'collapsed' }}"
				class="text-center px-5 pt-2"
				color="{{ switchChecked ? '#388E3C' : '#BDBDBD' }}"
				textWrap="true">
				<FormattedString>
				<Span text="&#xe55c;" class="fas  text-[22px]" />
					<Span text="&nbsp;" />
					<Span text="KBBI Daring" class="popin-r  text-[18px]" />
				</FormattedString>
			</Label>
			<Label row="1"
				visibility="{{ switchChecked ? 'visible' : 'collapsed' }}"
				class="text-center px-5 pb-2"
				color="{{ switchChecked ? '#388E3C' : '#BDBDBD' }}"
				textWrap="true">
				<FormattedString>
					<Span text="Untuk versi daring bersumber dari basis data&nbsp;" class="popin-r" />
					<Span text="KBBI VI daring (kbbi.kemdikbud.go.id)" class="popin-b" />
				</FormattedString>
			</Label>

			<ListView 
				class="mx-5 my-3"
				separatorColor="#f5f5f5"
				items="{{ data }}"
				visibility="{{ !switchChecked ? 'visible' : 'collapsed' }}" row="2"
				>
				<ListView.itemTemplate>
					<GridLayout rows="auto, auto, auto" columns="*, auto" class="pb-3">
						<Label textWrap="true" class="popin-b text-black text-[16px] my-2" row="0" col="0" colSpan="2">
							<FormattedString>
								<!-- <Span text="&#xf058;" class="fas" /> -->
								<Span text="{{ (index+1) + '.' }}" />
								<Span text="&nbsp;&nbsp;" />
								<Span text="{{ word }}" />
							</FormattedString>
						</Label>

						<!-- <Label textWrap="true" class="text-black text-[16px] my-2" row="0" col="1">
							<FormattedString>
								<Span text="&#xf02e;" class="far" />
							</FormattedString>
						</Label> -->

						<!-- <ui:Label html="{{ arti }}" class="text-black" row="1" col="0" colSpan="2" /> -->
						<HtmlView html="{{ arti }}" class="text-black" row="1" col="0" colSpan="2" />

						<!-- <ui:BannerAd class="mt-3" row="2" col="0" colSpan="2"
							visibility="{{ index % 3 === 0 ? 'visible' : 'collapsed' }}"
							height="70"
							width="350"
							unitId="ca-app-pub-1640120316722376/2423878232"
							layoutChanged="bannerAdLoaded" /> -->
					</GridLayout>
				</ListView.itemTemplate>
			</ListView>

			<GridLayout row="2" visibility="{{ !switchChecked &amp;&amp; !data.length ? 'visible' : 'collapsed' }}">
				<Label text="Mohon maaf terjadi kesalahan yang menyebabkan gagal memuat data." textWrap="true" class="popin-r text-center" />
			</GridLayout>

			<ListView 
				id="daring-list"
				class="mx-5 my-3"
				separatorColor="#f5f5f5"
				items="{{ dataDaring }}"
				visibility="{{ switchChecked &amp;&amp; showListKBBIDaring ? 'visible' : 'collapsed' }}" row="2"
				>
				<ListView.itemTemplate>
					<GridLayout rows="auto, auto, auto, auto" columns="*, auto" class="pb-3">
						<Label textWrap="true" class="popin-b text-black text-[16px] my-2" row="0" col="0" colSpan="2">
							<FormattedString>
								<Span text="{{ (index+1) + '.' }}" />
								<Span text="&nbsp;&nbsp;" />
								<Span text="{{ word }}" />
							</FormattedString>
						</Label>

						<Label textWrap="true" class="text-black text-[14px]" row="1" col="0" colSpan="2">
							<FormattedString>
								<Span text="lema" class="popin-r" />
								<Span text="&nbsp; &#xf178; &nbsp;" class="fas" />
								<Span text="{{ lema }}" class="popin-r" />
							</FormattedString>
						</Label>
						<HtmlView html="{{ arti }}" class="text-black" row="2" col="0" colSpan="2" />
					</GridLayout>
				</ListView.itemTemplate>
			</ListView>

			<GridLayout rows="*, auto, auto, *" row="2" class="px-5" visibility="{{ switchChecked &amp;&amp; !showListKBBIDaring ? 'visible' : 'collapsed' }}">
				<Button tap="{{ requestKBBIDaring }}" textWrap="true" class="mx-5 text-center text-white text-[12px] border-none rounded-full bg-black active:bg-gray-300 active:scale-95 transition duration-150" row="1" visibility="{{ !loadingRequestKBBIDaring ? 'visible' : 'collapsed' }}">
					<FormattedString>
						<Span text="{{ failRequestKBBIDARING ? '&#xf2f9;' : '&#xf04b;' }}" class="fas" />
						<Span text="&nbsp;&nbsp;" />
						<Span text="{{ failRequestKBBIDARING ? 'Meminta Data Lagi' : 'Meminta Data' }}" class="popin-r " />
					</FormattedString>
				</Button>
				<Label textWrap="true" class="text-center text-red-500 mt-3 mx-5" row="2" visibility="{{ !loadingRequestKBBIDaring &amp;&amp; failRequestKBBIDARING ? 'visible' : 'collapsed' }}">
					<FormattedString>
						<Span text="Terjadi sedikit kesalahan, &nbsp;" class="popin-r" />
						<Span text="proses dihentikan karena server&nbsp;" class="popin-r" />
						<Span text="kbbi.kemdikbud.go.id&nbsp;" class="popin-b" />
						<Span text="tidak merespon, silahkan coba kembali beberapa saat, terimakasih&nbsp;" class="popin-r" />
						<Span text="&#xf118;" class="far" />
					</FormattedString>
				</Label>
				<ActivityIndicator busy="true" height="40" width="40" row="1" visibility="{{ loadingRequestKBBIDaring ? 'visible' : 'collapsed' }}" />
				<Label textWrap="true" class="text-center text-black mt-3 mx-5" row="2" visibility="{{ loadingRequestKBBIDaring ? 'visible' : 'collapsed' }}">
					<FormattedString>
						<Span text="Proses sedang berlangsung, mungkin ini akan membutuhkan waktu beberapa saat, mohon untuk bersabar&nbsp;" class="popin-r" />
						<Span text="&#xf25b;" class="fas" />
					</FormattedString>
				</Label>
			</GridLayout>
			
		</GridLayout>

		<!-- Text Info -->
		<StackLayout class="bg-gray-200" row="7">
			<admob:BannerAd
				height="70"
				width="350"
				unitId="ca-app-pub-1640120316722376/2423878232"
				layoutChanged="{{ bannerAdLoaded }}" />
		</StackLayout>
	</GridLayout>
</Page>
